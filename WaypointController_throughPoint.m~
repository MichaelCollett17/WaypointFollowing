function [ state ] = WaypointController_throughPoint( state, W, P)
wCurr = 2;
W2 = [[state(1); state(2)], W(:,1),W(:,2), W(:,3), W(:,4), [W(1,4)+ 10; W(2,4)]]
[WrowLength WColLength] = size(W2);
while(wCurr < WColLength)
    Wimin1 = W2(:,wCurr-1)
    Wi = W2(:,wCurr)
    Wiplus1 = W2(:,wCurr+1)
    
    %line = [Wimin1(1); Wimin1(2); atan2(Wi(2)-Wimin1(2), Wi(1)-Wimin1(1))];
    
    
    qimin1 = (Wi - Wimin1)/norm(Wi - Wimin1);
    qi = (Wiplus1 - Wi)/norm(Wiplus1 - Wi);
    
    line = [Wimin1(1); Wimin1(2); ];
    
    n = (qimin1 + qi)/norm(qimin1 + qi);%s
    
    state = FollowLine(state, line, P, n, Wi);
    
    wCurr = wCurr + 1;
end
end

